# FirstApiSDK

FirstApiSdk - Typescript client for FirstApiSDK
Payment Gateway API for payment processing. Version 6.5

- API version: 6.5
- Package version: 1.1.0

## Installation

```shell
    npm install GBSEcom/NPM --save --save-exact
```

## Reference Documentation

https://docs.firstdata.com/org/gateway/docs/api

## Getting Started

```typescript
import {AxiosPromise} from "axios";
import {
  Amount,
  PrimaryTransaction,
  PrimaryTransactionParams,
  PaymentMethod,
  TransactionType,
  Card,
  TransactionResponse,
  Context, IContext,
  ICredentials,
  IConfiguration,
  IClientFactory,
  IPaymentApi,
} from "firstapi-sdk";

const getPaymentClient = (): IPaymentApi => {
  const credentials: ICredentials = {
    apiKey: "API_KEY_HERE",
    apiSecret: "API_SECRET_HERE",
  };

  const config: IConfiguration {
    basePath: "https://cert.api.firstdata.com/gateway",
    credentials,
  };

  const context: IContext = new Context(config);
  const factory: IClientFactory = context.factory;
  return factory.paymentApi();
};

const getApiParams = (): PrimaryTransactionParams => {
  const amount: Amount = {
    total: 27.00,

    // ISO 4217 currency code
    currency: "USD",
  };

  const card: Card = {
    cardholderName: "Example Name",
    cardNumber: "4242424242424242",
    expDate: "022022", // MMCCYY
    cvv: "123",
  };

  const paymentMethod: PaymentMethod = {
    methodType: PaymentMethod.MethodTypeEnum.Card,
    card,
  };

  const payload: PrimaryTransaction = {
    transactionType: TransactionType.SALE,
    amount,
    paymentMethod,
  };

  return {
    payload,
  };
};

const responsePromise: AxiosPromise<TransactionResponse> =
  getPaymentClient().primaryPaymentTransaction(getApiParams());

```

## Repo Organization

- src/openapi/: code auto-generated from api specification
- src/firstdata/: code manually created for simpler API
- src/firstdata/api/: wrapper classes for each api
- src/firstdata/context.ts: takes care of object instantiation while still providing flexibility
- src/firstdata/factory.ts: an instance of this class is exposed on Context instances and provides noarg methods to instantiate each api client
- src/firstdata/models.ts: exposes models both autogenerated and specific to the wrapper api classes

## API Methods/Endpoints

All URIs are relative to *https://cert.api.firstdata.com/gateway*

Interface | Method | HTTP request | Description
------------ | ------------- | ------------- | -------------
*IAuthenticationApi* | **getAccessToken(): AxiosPromise<AccessTokenResponse>** | **POST** /v1/authentication/access-tokens | Generate an access token for user authentication.
*ICardInfoLookupApi* | **cardInfoLookup(params: CardInfoLookupParams): AxiosPromise<CardInfoLookupResponse>** | **POST** /v1/card-information | Card Information lookup
*ICardVerificationApi* | **verifyCard(params: VerifyCardParams): AxiosPromise<TransactionResponse>** | **POST** /v1/card-verification |
*ICurrencyConversionApi* | **getExchangeRate(params: ExchangeRateParams): AxiosPromise<ExchangeRateResponse>** | **POST** /v1/exchange-rates | Generate dynamic currency conversion transactions
*IFraudDetectApi* | **scoreOnly(params: ScoreOnlyParams): AxiosPromise<ScoreOnlyResponse>** | **POST** /v1/fraud/score-only | Score a transaction for fraud.
*IOrderApi* | **orderInquiry(params: OrderParams): AxiosPromise<OrderResponse>** | **GET** /v1/orders/{order-id} | Retrieve the state of an order
*IOrderApi* | **orderPostAuth(params: SecondaryTxOrderParams): AxiosPromise<TransactionResponse>** | **POST** /v1/orders/{order-id}/postauth | Capture/complete an already existing order.
*IOrderApi* | **orderReturnTransaction(params: SecondaryTxOrderParams): AxiosPromise<TransactionResponse>** | **POST** /v1/orders/{order-id}/return | Return/refund an order.
*IPaymentApi* | **performPaymentPostAuthorisation** | **POST** /v1/payments/{transaction-id}/postauth | Capture/complete a transaction.
*IPaymentApi* | **primaryPaymentTransaction** | **POST** /v1/payments | Generate a primary transaction.
*IPaymentApi* | **returnTransaction** | **POST** /v1/payments/{transaction-id}/return | Return/refund a transaction.
*IPaymentApi* | **transactionInquiry** | **GET** /v1/payments/{transaction-id} | Retrieve the state of a transaction.
*IPaymentApi* | **voidTransaction** | **POST** /v1/payments/{transaction-id}/void | Reverse a previous action on an existing transaction.
*IPaymentSchedulesApi* | **createPaymentSchedule** | **POST** /v1/payment-schedules | Use this to create a gateway payment schedule.
*IPaymentSchedulesApi* | **inquiryPaymentSchedule** | **GET** /v1/payment-schedules/{order-id} | Inquire a Gateway payment schedule.
*IPaymentTokenApi* | **createPaymentToken** | **POST** /v1/payment-tokens | To perform payment tokenization with a payment card
*IPaymentUrlApi* | **createPaymentUrl** | **POST** /v1/payment-url | Create a payment URL.
